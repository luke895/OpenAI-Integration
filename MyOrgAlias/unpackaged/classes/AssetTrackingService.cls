public with sharing class AssetTrackingService {
    public static void processTaskForAssets(Task taskRecord) {
        System.debug('üîµ [AssetTrackingService] Processing task: ' + taskRecord.Id);

        if (!isValidTask(taskRecord)) {
            return;
        }

        String aiResponse = AIUtility.callOpenAI(taskRecord.Description);
        if (aiResponse == null) {
            System.debug('‚ùå No AI response received.');
            return;
        }

        List<Map<String, Object>> extractedAssets = AIResponseParser.parseAIResponse(aiResponse);
        System.debug('üü¢ Extracted Assets: ' + JSON.serializePretty(extractedAssets));

        // ‚úÖ Send extracted data to AI Staging
        AIStagingService.sendToAIStaging(taskRecord.Id, extractedAssets);
    }

    private static Boolean isValidTask(Task taskRecord) {
        return taskRecord != null && !String.isBlank(taskRecord.Description);
    }
}